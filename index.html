<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>2주 매출 목표 대시보드</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #444; padding: 8px; text-align: center; }
    th { background: #222; }
    input { background: #222; color: #eee; border: 1px solid #555; }
  </style>
</head>
<body>
  <h2>📊 2주 매출 목표 대시보드</h2>
  <table>
    <thead>
      <tr>
        <th>일차</th>
        <th>날짜</th>
        <th>실제 매출</th>
        <th>누적</th>
        <th>누적 달성률</th>
      </tr>
    </thead>
    <tbody id="tbody"></tbody>
  </table>

  <script>
    // 👉 요일 변환 함수
    const DAYS = ['일','월','화','수','목','금','토'];
    const getKoreanWeekday = (y, m, d) => DAYS[new Date(y, m - 1, d).getDay()];

    // 👉 더미 데이터 (기간 14일)
    const state = {
      start: new Date(2025, 8, 16), // 9월 = index 8
      days: 14,
      sales: []
    };

    // 👉 포맷 함수
    const pct = v => (v * 100).toFixed(2) + '%';
    const fmt = v => v.toLocaleString();

    // 👉 렌더링 함수
    function render() {
      const tbody = document.getElementById('tbody');
      tbody.innerHTML = '';
      let cum = 0;
      for (let i = 0; i < state.days; i++) {
        const d = new Date(state.start);
        d.setDate(state.start.getDate() + i);

        const y = d.getFullYear();
        const m = d.getMonth() + 1;
        const da = d.getDate();
        const wd = getKoreanWeekday(y, m, da); // 요일 구하기

        const s = state.sales[i] || 0;
        cum += s;
        const rate = cum / 1800000; // 목표 대비 달성률 (예: 180만)

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${i+1}</td>
          <td>${y}-${m}-${da} (${wd})</td>
          <td>
            <input type="number" min="0" step="1000" value="${s}" data-idx="${i}" style="width:140px; text-align:right">
          </td>
          <td>${fmt(cum)}</td>
          <td>${pct(rate)}</td>
        `;
        tbody.appendChild(tr);
      }

      // 입력 이벤트 바인딩
      tbody.querySelectorAll('input[type="number"]').forEach(inp => {
        inp.addEventListener('input', () => {
          const i = Number(inp.dataset.idx);
          state.sales[i] = Number(inp.value) || 0;
          render(); // 다시 렌더링 (누적 반영)
        });
      });
    }

    render();
  </script>
</body>
</html>

